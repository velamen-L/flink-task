# é˜¿é‡Œäº‘æ¶æ„è°ƒæ•´è¯´æ˜

## ğŸ¯ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åŸºäºé˜¿é‡Œäº‘ç”Ÿæ€çš„Flinkå®æ—¶è®¡ç®—æ¶æ„è°ƒæ•´ï¼ŒåŒ…æ‹¬Catalogé›†æˆã€VVPå¹³å°é€‚é…ã€ç›‘æ§ä½“ç³»æ„å»ºç­‰æŠ€æœ¯æ–¹æ¡ˆã€‚

## ğŸ—ï¸ é˜¿é‡Œäº‘é›†æˆæ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸šåŠ¡ç³»ç»Ÿ      â”‚    â”‚   é˜¿é‡Œäº‘Kafka    â”‚    â”‚   é˜¿é‡Œäº‘VVP     â”‚
â”‚                â”‚    â”‚                â”‚    â”‚                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ä¸šåŠ¡äº‹ä»¶    â”‚ â”‚â”€â”€â”€â–¶â”‚ â”‚ ç»Ÿä¸€Topic   â”‚ â”‚â”€â”€â”€â–¶â”‚ â”‚ Flinkä½œä¸š   â”‚ â”‚
â”‚ â”‚ ç”Ÿæˆ        â”‚ â”‚    â”‚ â”‚ wrongbook-  â”‚ â”‚    â”‚ â”‚ é›†ç¾¤        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ events      â”‚ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                â”‚
                                              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                              â”‚ â”‚ Catalog     â”‚ â”‚
                                              â”‚ â”‚ è¡¨ç®¡ç†      â”‚ â”‚
                                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                              â”‚                â”‚
                                              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                              â”‚ â”‚ ç›‘æ§å‘Šè­¦    â”‚ â”‚
                                              â”‚ â”‚ ä½“ç³»        â”‚ â”‚
                                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   æ•°æ®è¾“å‡º      â”‚
                                              â”‚                â”‚
                                              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                              â”‚ â”‚ é˜¿é‡Œäº‘RDS   â”‚ â”‚
                                              â”‚ â”‚ MySQL       â”‚ â”‚
                                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                              â”‚                â”‚
                                              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                                              â”‚ â”‚ é˜¿é‡Œäº‘SLS   â”‚ â”‚
                                              â”‚ â”‚ æ—¥å¿—æœåŠ¡    â”‚ â”‚
                                              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. é˜¿é‡Œäº‘Kafka
- **åŠŸèƒ½**: ç»Ÿä¸€çš„äº‹ä»¶å­˜å‚¨å’Œåˆ†å‘
- **ä¼˜åŠ¿**: é«˜å¯ç”¨ã€é«˜æ€§èƒ½ã€æ˜“æ‰©å±•
- **é…ç½®**: æ”¯æŒSASLè®¤è¯ã€SSLåŠ å¯†

#### 2. é˜¿é‡Œäº‘VVP
- **åŠŸèƒ½**: å®æ—¶è®¡ç®—å¹³å°
- **ä¼˜åŠ¿**: æ‰˜ç®¡æœåŠ¡ã€è‡ªåŠ¨æ‰©ç¼©å®¹
- **é›†æˆ**: æ”¯æŒCatalogã€ç›‘æ§ã€å‘Šè­¦

#### 3. é˜¿é‡Œäº‘Catalog
- **åŠŸèƒ½**: ç»Ÿä¸€è¡¨ç»“æ„ç®¡ç†
- **ä¼˜åŠ¿**: ç®€åŒ–é…ç½®ã€ç‰ˆæœ¬æ§åˆ¶
- **æ”¯æŒ**: å¤šç§æ•°æ®æºå’Œæ ¼å¼

## ğŸ”§ Catalogé›†æˆæ–¹æ¡ˆ

### 1. Catalogé…ç½®

#### é…ç½®æ–‡ä»¶
```yaml
# catalog-config.yaml
catalogs:
  - name: aliyun_catalog
    type: hive
    default-database: dwd
    hive-conf-dir: /opt/flink/conf
    hive-version: 3.1.2
    configuration:
      hive.metastore.uris: thrift://metastore.aliyun.com:9083
      hive.metastore.warehouse.dir: oss://bucket-name/warehouse
      fs.oss.endpoint: oss-cn-hangzhou.aliyuncs.com
      fs.oss.accessKeyId: ${ACCESS_KEY_ID}
      fs.oss.accessKeySecret: ${ACCESS_KEY_SECRET}
```

#### è¡¨ç»“æ„å®šä¹‰
```sql
-- æºè¡¨å®šä¹‰
CREATE TABLE aliyun_catalog.dwd.wrongbook_events (
    eventId STRING,
    domain STRING,
    type STRING,
    timestamp BIGINT,
    payload STRING,
    proc_time AS PROCTIME()
) WITH (
    'connector' = 'kafka',
    'topic' = 'wrongbook-events',
    'properties.bootstrap.servers' = 'kafka.aliyun.com:9092',
    'properties.group.id' = 'wrongbook-wide-table-group',
    'format' = 'json',
    'json.fail-on-missing-field' = 'false',
    'json.ignore-parse-errors' = 'true'
);

-- ç»“æœè¡¨å®šä¹‰
CREATE TABLE aliyun_catalog.dwd.dwd_wrong_record_wide_delta (
    id BIGINT,
    wrong_id STRING,
    user_id STRING,
    subject STRING,
    subject_name STRING,
    question_id STRING,
    question STRING,
    pattern_id STRING,
    pattern_name STRING,
    teach_type_id STRING,
    teach_type_name STRING,
    collect_time TIMESTAMP(3),
    fix_id STRING,
    fix_time TIMESTAMP(3),
    fix_result BIGINT,
    fix_result_desc STRING,
    event_id STRING,
    event_type STRING,
    process_time TIMESTAMP(3)
) WITH (
    'connector' = 'jdbc',
    'url' = 'jdbc:mysql://rds.aliyun.com:3306/dwd',
    'table-name' = 'dwd_wrong_record_wide_delta',
    'username' = '${MYSQL_USERNAME}',
    'password' = '${MYSQL_PASSWORD}',
    'sink.buffer-flush.max-rows' = '100',
    'sink.buffer-flush.interval' = '10s'
);
```

### 2. SQLä½œä¸šé€‚é…

#### åŸºäºCatalogçš„SQL
```sql
-- ä½¿ç”¨Catalogä¸­çš„è¡¨
USE CATALOG aliyun_catalog;
USE DATABASE dwd;

-- åˆ›å»ºå¤„ç†è§†å›¾
CREATE TEMPORARY VIEW wrongbook_add_events AS
SELECT 
    eventId,
    domain,
    type,
    timestamp,
    TO_TIMESTAMP_LTZ(timestamp, 3) as event_time,
    PROCTIME() as proc_time,
    JSON_VALUE(payload, '$.userId') as userid,
    JSON_VALUE(payload, '$.questionId') as questionid,
    JSON_VALUE(payload, '$.subject') as subject,
    JSON_VALUE(payload, '$.subjectName') as subject_name,
    JSON_VALUE(payload, '$.patternId') as pattern_id,
    JSON_VALUE(payload, '$.chapterId') as chapter_id,
    JSON_VALUE(payload, '$.chapterName') as chapter_name,
    JSON_VALUE(payload, '$.wrongTime') as wrong_time,
    JSON_VALUE(payload, '$.createTime') as create_time
FROM wrongbook_events 
WHERE domain = 'wrongbook' 
  AND type = 'wrongbook_add';

-- å¤„ç†é”™é¢˜æ·»åŠ äº‹ä»¶
INSERT INTO dwd_wrong_record_wide_delta
SELECT 
    CAST(HASH_CODE(COALESCE(eventId)) AS BIGINT) as id,
    eventId as wrong_id,
    userid as user_id,
    subject,
    subject_name,
    questionid as question_id,
    '' as question,
    pattern_id,
    '' as pattern_name,
    chapter_id,
    chapter_name,
    TO_TIMESTAMP_LTZ(CAST(wrong_time AS BIGINT), 3) as collect_time,
    '' as fix_id,
    CAST(NULL AS TIMESTAMP(3)) as fix_time,
    0 as fix_result,
    'æœªè®¢æ­£' as fix_result_desc,
    eventId as event_id,
    type as event_type,
    proc_time as process_time
FROM wrongbook_add_events;
```

## ğŸš€ VVPå¹³å°é€‚é…

### 1. ä½œä¸šé…ç½®

#### ä½œä¸šå‚æ•°é…ç½®
```yaml
# vvp-job-config.yaml
job:
  name: "é”™é¢˜æœ¬å®æ—¶å®½è¡¨"
  type: "SQL"
  version: "1.0"
  
flink:
  parallelism: 2
  checkpoint-interval: 10000
  checkpoint-mode: "EXACTLY_ONCE"
  state-backend: "rocksdb"
  state-checkpoints-dir: "oss://bucket-name/checkpoints"
  
resources:
  jobmanager:
    memory: "2GB"
    cpu: 1
  taskmanager:
    memory: "4GB"
    cpu: 2
    replicas: 2
    
catalog:
  name: "aliyun_catalog"
  type: "hive"
  configuration:
    hive.metastore.uris: "thrift://metastore.aliyun.com:9083"
```

#### ç¯å¢ƒå˜é‡é…ç½®
```bash
# ç¯å¢ƒå˜é‡
export ACCESS_KEY_ID="your_access_key_id"
export ACCESS_KEY_SECRET="your_access_key_secret"
export MYSQL_USERNAME="your_mysql_username"
export MYSQL_PASSWORD="your_mysql_password"
export KAFKA_USERNAME="your_kafka_username"
export KAFKA_PASSWORD="your_kafka_password"
```

### 2. éƒ¨ç½²æµç¨‹

#### è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
```bash
#!/bin/bash
# deploy-to-vvp.sh

# 1. ä¸Šä¼ SQLæ–‡ä»¶
echo "ä¸Šä¼ SQLæ–‡ä»¶åˆ°VVP..."
vvp-cli sql upload \
  --file wrongbook_wide_table.sql \
  --project wrongbook-project \
  --name "é”™é¢˜æœ¬å®æ—¶å®½è¡¨"

# 2. åˆ›å»ºä½œä¸š
echo "åˆ›å»ºFlinkä½œä¸š..."
vvp-cli job create \
  --name "é”™é¢˜æœ¬å®æ—¶å®½è¡¨" \
  --sql-file wrongbook_wide_table.sql \
  --config vvp-job-config.yaml \
  --project wrongbook-project

# 3. å¯åŠ¨ä½œä¸š
echo "å¯åŠ¨ä½œä¸š..."
vvp-cli job start \
  --name "é”™é¢˜æœ¬å®æ—¶å®½è¡¨" \
  --project wrongbook-project

echo "éƒ¨ç½²å®Œæˆï¼"
```

#### ç›‘æ§é…ç½®
```yaml
# monitoring-config.yaml
monitoring:
  metrics:
    - name: "events_processed_per_second"
      type: "counter"
      description: "æ¯ç§’å¤„ç†äº‹ä»¶æ•°"
      
    - name: "processing_latency"
      type: "gauge"
      description: "å¤„ç†å»¶è¿Ÿ"
      
    - name: "error_rate"
      type: "gauge"
      description: "é”™è¯¯ç‡"
      
  alerts:
    - name: "high_latency"
      condition: "processing_latency > 30s"
      severity: "critical"
      notification:
        type: "webhook"
        url: "https://webhook.aliyun.com/alert"
        
    - name: "high_error_rate"
      condition: "error_rate > 1%"
      severity: "warning"
      notification:
        type: "email"
        recipients: ["admin@company.com"]
```

## ğŸ“Š ç›‘æ§ä½“ç³»æ„å»º

### 1. é˜¿é‡Œäº‘SLSé›†æˆ

#### æ—¥å¿—é…ç½®
```yaml
# log-config.yaml
logging:
  level: "INFO"
  pattern: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  
  appenders:
    - name: "console"
      type: "console"
      
    - name: "file"
      type: "file"
      file: "/var/log/flink/wrongbook-wide-table.log"
      max-size: "100MB"
      max-files: 10
      
    - name: "sls"
      type: "aliyun-sls"
      endpoint: "cn-hangzhou.log.aliyuncs.com"
      project: "wrongbook-project"
      logstore: "flink-logs"
      access-key-id: "${ACCESS_KEY_ID}"
      access-key-secret: "${ACCESS_KEY_SECRET}"
```

#### æ—¥å¿—æ”¶é›†
```java
// æ—¥å¿—è®°å½•ç¤ºä¾‹
public class WrongbookWideTableApp {
    private static final Logger logger = LoggerFactory.getLogger(WrongbookWideTableApp.class);
    
    public static void main(String[] args) throws Exception {
        logger.info("å¯åŠ¨é”™é¢˜æœ¬å®æ—¶å®½è¡¨ä½œä¸š");
        
        try {
            // ä½œä¸šé€»è¾‘
            logger.info("ä½œä¸šå¯åŠ¨æˆåŠŸ");
        } catch (Exception e) {
            logger.error("ä½œä¸šå¯åŠ¨å¤±è´¥", e);
            throw e;
        }
    }
}
```

### 2. é˜¿é‡Œäº‘ARMSé›†æˆ

#### åº”ç”¨ç›‘æ§é…ç½®
```yaml
# arms-config.yaml
arms:
  application:
    name: "wrongbook-wide-table"
    version: "1.0.0"
    
  tracing:
    enabled: true
    sample-rate: 0.1
    
  metrics:
    enabled: true
    interval: 60s
    
  alerts:
    - name: "job_failure"
      condition: "job_status == 'FAILED'"
      severity: "critical"
      
    - name: "high_memory_usage"
      condition: "memory_usage > 80%"
      severity: "warning"
```

#### æ€§èƒ½ç›‘æ§
```java
// æ€§èƒ½ç›‘æ§ç¤ºä¾‹
public class PerformanceMonitor {
    private static final Counter eventsProcessed = Counter.builder("events_processed_total")
        .description("Total number of events processed")
        .register();
        
    private static final Gauge processingLatency = Gauge.builder("processing_latency_seconds")
        .description("Event processing latency")
        .register();
        
    public static void recordEventProcessed() {
        eventsProcessed.increment();
    }
    
    public static void recordLatency(double latency) {
        processingLatency.set(latency);
    }
}
```

### 3. é˜¿é‡Œäº‘äº‘ç›‘æ§é›†æˆ

#### ç›‘æ§å¤§ç›˜é…ç½®
```json
{
  "dashboard": {
    "name": "é”™é¢˜æœ¬å®æ—¶å®½è¡¨ç›‘æ§",
    "description": "å®æ—¶ç›‘æ§é”™é¢˜æœ¬å®½è¡¨å¤„ç†æƒ…å†µ",
    "panels": [
      {
        "title": "äº‹ä»¶å¤„ç†é€Ÿç‡",
        "type": "line",
        "query": "events_processed_per_second",
        "yAxis": {
          "min": 0,
          "max": "auto"
        }
      },
      {
        "title": "å¤„ç†å»¶è¿Ÿ",
        "type": "line",
        "query": "processing_latency_seconds",
        "yAxis": {
          "min": 0,
          "max": 60
        }
      },
      {
        "title": "é”™è¯¯ç‡",
        "type": "line",
        "query": "error_rate",
        "yAxis": {
          "min": 0,
          "max": 0.1
        }
      },
      {
        "title": "å†…å­˜ä½¿ç”¨ç‡",
        "type": "gauge",
        "query": "memory_usage_percent",
        "yAxis": {
          "min": 0,
          "max": 100
        }
      }
    ]
  }
}
```

## ğŸ”§ å®‰å…¨é…ç½®

### 1. è®¿é—®æ§åˆ¶

#### RAMæƒé™é…ç½®
```json
{
  "Version": "1",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "kafka:DescribeTopic",
        "kafka:ConsumeMessage",
        "rds:DescribeDBInstances",
        "rds:DescribeDatabases",
        "rds:DescribeTables",
        "rds:ModifyDatabase",
        "oss:GetObject",
        "oss:PutObject",
        "oss:ListObjects",
        "log:GetLogs",
        "log:PutLogs"
      ],
      "Resource": [
        "acs:kafka:*:*:topic/wrongbook-events",
        "acs:rds:*:*:dbinstance/wrongbook-rds",
        "acs:oss:*:*:bucket/wrongbook-bucket/*",
        "acs:log:*:*:project/wrongbook-project"
      ]
    }
  ]
}
```

#### ç½‘ç»œå®‰å…¨é…ç½®
```yaml
# network-config.yaml
network:
  vpc:
    id: "vpc-xxx"
    cidr: "10.0.0.0/16"
    
  security-groups:
    - name: "flink-sg"
      rules:
        - protocol: "tcp"
          port: "8081"
          source: "10.0.0.0/16"
          description: "Flink Web UI"
        - protocol: "tcp"
          port: "9092"
          source: "10.0.0.0/16"
          description: "Kafka"
        - protocol: "tcp"
          port: "3306"
          source: "10.0.0.0/16"
          description: "MySQL"
```

### 2. æ•°æ®åŠ å¯†

#### ä¼ è¾“åŠ å¯†
```yaml
# encryption-config.yaml
encryption:
  kafka:
    ssl:
      enabled: true
      truststore: "/opt/flink/conf/kafka.truststore.jks"
      keystore: "/opt/flink/conf/kafka.keystore.jks"
      
  mysql:
    ssl:
      enabled: true
      verify-server-cert: true
      
  oss:
    encryption:
      algorithm: "AES256"
      key-id: "alias/wrongbook-key"
```

#### å­˜å‚¨åŠ å¯†
```sql
-- æ•°æ®åº“è¡¨åŠ å¯†
CREATE TABLE dwd_wrong_record_wide_delta (
    -- å­—æ®µå®šä¹‰
) WITH (
    'connector' = 'jdbc',
    'url' = 'jdbc:mysql://rds.aliyun.com:3306/dwd?useSSL=true&requireSSL=true',
    'table-name' = 'dwd_wrong_record_wide_delta',
    'username' = '${MYSQL_USERNAME}',
    'password' = '${MYSQL_PASSWORD}'
) ENCRYPTED WITH (
    'algorithm' = 'AES256',
    'key-id' = 'alias/wrongbook-key'
);
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. èµ„æºé…ç½®ä¼˜åŒ–

#### å†…å­˜é…ç½®
```yaml
# memory-config.yaml
memory:
  jobmanager:
    heap-size: "2GB"
    off-heap-size: "1GB"
    
  taskmanager:
    heap-size: "4GB"
    off-heap-size: "2GB"
    managed-memory-size: "2GB"
    network-memory-size: "1GB"
    
  state:
    backend: "rocksdb"
    checkpoint-dir: "oss://bucket-name/checkpoints"
    state-ttl: "1d"
```

#### å¹¶è¡Œåº¦é…ç½®
```yaml
# parallelism-config.yaml
parallelism:
  source: 3
  processing: 6
  sink: 3
  
  scaling:
    enabled: true
    min-parallelism: 2
    max-parallelism: 10
    scale-up-threshold: 0.8
    scale-down-threshold: 0.3
```

### 2. ç½‘ç»œä¼˜åŒ–

#### ç½‘ç»œé…ç½®
```yaml
# network-optimization.yaml
network:
  buffer-timeout: "100ms"
  buffer-size: "32KB"
  
  backpressure:
    enabled: true
    sampling-interval: "100ms"
    
  checkpoint:
    alignment-timeout: "10s"
    unaligned: true
```

### 3. å­˜å‚¨ä¼˜åŒ–

#### çŠ¶æ€åç«¯ä¼˜åŒ–
```yaml
# state-backend-config.yaml
state:
  backend: "rocksdb"
  
  rocksdb:
    state.backend.rocksdb.memory.managed: true
    state.backend.rocksdb.memory.fixed-per-slot: "100MB"
    state.backend.rocksdb.memory.write-buffer-ratio: 0.4
    state.backend.rocksdb.memory.high-prio-pool-ratio: 0.1
    
  checkpoint:
    interval: "10s"
    timeout: "5min"
    min-pause: "2s"
    max-concurrent: 1
```

## ğŸ“ˆ æˆæœ¬ä¼˜åŒ–

### 1. èµ„æºæˆæœ¬ä¼˜åŒ–

#### å®ä¾‹è§„æ ¼é€‰æ‹©
```yaml
# instance-config.yaml
instances:
  jobmanager:
    instance-type: "ecs.g6.large"
    spot-instance: false
    
  taskmanager:
    instance-type: "ecs.g6.xlarge"
    spot-instance: true
    max-price: "0.5"
    
  autoscaling:
    enabled: true
    min-instances: 2
    max-instances: 10
    scale-up-cooldown: "5min"
    scale-down-cooldown: "10min"
```

#### å­˜å‚¨æˆæœ¬ä¼˜åŒ–
```yaml
# storage-cost-optimization.yaml
storage:
  checkpoint:
    retention: "7d"
    compression: "lz4"
    
  state:
    ttl: "1d"
    cleanup-mode: "full"
    
  log:
    retention: "30d"
    compression: "gzip"
```

### 2. ç½‘ç»œæˆæœ¬ä¼˜åŒ–

#### æ•°æ®ä¼ è¾“ä¼˜åŒ–
```yaml
# network-cost-optimization.yaml
network:
  compression:
    enabled: true
    algorithm: "lz4"
    
  batching:
    enabled: true
    max-batch-size: "1MB"
    max-batch-time: "100ms"
    
  routing:
    prefer-same-zone: true
    use-private-network: true
```

## ğŸ‰ æ€»ç»“

é€šè¿‡é˜¿é‡Œäº‘æ¶æ„è°ƒæ•´ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š

1. **Catalogé›†æˆ**: ç»Ÿä¸€è¡¨ç»“æ„ç®¡ç†ï¼Œç®€åŒ–é…ç½®
2. **VVPå¹³å°é€‚é…**: æ‰˜ç®¡æœåŠ¡ï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹
3. **ç›‘æ§ä½“ç³»**: å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶
4. **å®‰å…¨é…ç½®**: å¤šå±‚æ¬¡çš„å®‰å…¨é˜²æŠ¤
5. **æ€§èƒ½ä¼˜åŒ–**: é’ˆå¯¹æ€§çš„æ€§èƒ½è°ƒä¼˜
6. **æˆæœ¬ä¼˜åŒ–**: åˆç†çš„èµ„æºé…ç½®å’Œæˆæœ¬æ§åˆ¶

è¿™å¥—é˜¿é‡Œäº‘é›†æˆæ–¹æ¡ˆä¸ºé”™é¢˜æœ¬å®æ—¶å®½è¡¨æä¾›äº†å®Œæ•´çš„äº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä¸šåŠ¡çš„å¿«é€Ÿå‘å±•å’ŒæŠ€æœ¯çš„æŒç»­æ¼”è¿›ã€‚
