# ç›®å½•ç»“æ„è°ƒæ•´è¯´æ˜ v2.0

## ğŸ”„ ç›®å½•ç»“æ„å˜æ›´

### å˜æ›´å‰
```
jobdomain/                    # ä½œä¸šåŸŸé…ç½®ç›®å½•
â”œâ”€â”€ wrongbook/
â”œâ”€â”€ user-daily-stats/
â””â”€â”€ learning-analysis/
```

### å˜æ›´å
```
job/                          # ä½œä¸šé…ç½®ç›®å½•ï¼ˆæ›´ç®€æ´ï¼‰
â”œâ”€â”€ flink-sql-request-template.md  # SQLä½œä¸šè¯·æ±‚æ¨¡æ¿
â”œâ”€â”€ wrongbook/
â”œâ”€â”€ user-daily-stats/
â””â”€â”€ learning-analysis/
```

## ğŸ“‹ å˜æ›´åŸå› 

1. **åç§°ç®€åŒ–**ï¼š`job` æ¯” `jobdomain` æ›´ç®€æ´æ˜äº†
2. **ç”¨é€”æ˜ç¡®**ï¼šç›´æ¥è¡¨è¾¾è¿™æ˜¯ä½œä¸šé…ç½®ç›®å½•
3. **ç»Ÿä¸€æ¨¡æ¿**ï¼šåœ¨æ ¹ç›®å½•æä¾›ç»Ÿä¸€çš„æ¨¡æ¿æ–‡ä»¶
4. **å‡å°‘å±‚çº§**ï¼šç®€åŒ–ç›®å½•ç»“æ„ï¼Œæé«˜å¯ç»´æŠ¤æ€§

## ğŸ—ï¸ æ–°çš„å®Œæ•´ç›®å½•ç»“æ„

```
flink-multi-source-business/
â”œâ”€â”€ job/                                          # ä½œä¸šé…ç½®ç›®å½•
â”‚   â”œâ”€â”€ flink-sql-request-template.md             # SQLä½œä¸šè¯·æ±‚æ¨¡æ¿
â”‚   â”œâ”€â”€ wrongbook/                                # é”™é¢˜æœ¬ä½œä¸š
â”‚   â”‚   â”œâ”€â”€ request.md                            # JARä½œä¸šéœ€æ±‚é…ç½®
â”‚   â”‚   â”œâ”€â”€ flink-sql-request.md                  # SQLä½œä¸šè¯·æ±‚é…ç½®
â”‚   â”‚   â”œâ”€â”€ config/wrongbook-job.yml              # ä½œä¸šé…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ sql/                                  # ç”Ÿæˆçš„SQLæ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ wrongbook_wide_table.sql          # é”™é¢˜å®½è¡¨SQL
â”‚   â”‚   â”‚   â”œâ”€â”€ wrongbook_wide_table_v2.sql       # é”™é¢˜å®½è¡¨SQL v2
â”‚   â”‚   â”‚   â””â”€â”€ data_validation_wrongbook_fix.sql # æ•°æ®éªŒè¯SQL
â”‚   â”‚   â””â”€â”€ docs/                                 # ä½œä¸šæ–‡æ¡£
â”‚   â”‚       â”œâ”€â”€ DataStream APIéƒ¨ç½²è¯´æ˜.md          # DataStreaméƒ¨ç½²
â”‚   â”‚       â”œâ”€â”€ é”™é¢˜æœ¬Flink SQLä½œä¸šé…ç½®è¯´æ˜.md      # SQLé…ç½®è¯´æ˜
â”‚   â”‚       â””â”€â”€ é”™é¢˜æœ¬Payloadæ•°æ®ç»“æ„è¯´æ˜.md        # Payloadç»“æ„
â”‚   â”œâ”€â”€ user-daily-stats/                         # ç”¨æˆ·ç»Ÿè®¡ä½œä¸š
â”‚   â”‚   â””â”€â”€ request.md                            # ä½œä¸šéœ€æ±‚é…ç½®
â”‚   â””â”€â”€ learning-analysis/                        # å­¦ä¹ åˆ†æä½œä¸šï¼ˆé¢„ç•™ï¼‰
â”œâ”€â”€ src/main/java/com/flink/business/              # Javaæºç 
â”‚   â”œâ”€â”€ MultiSourceBusinessApplication.java       # ç»Ÿä¸€ä¸»åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ core/                                     # æ ¸å¿ƒæ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ config/                               # å…¨å±€é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ GlobalConfig.java                 # å…¨å±€é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ JobDomainConfig.java              # ä½œä¸šåŸŸé…ç½®
â”‚   â”‚   â”œâ”€â”€ service/                              # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ JobDomainManager.java             # ä½œä¸šåŸŸç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ EventSourceManager.java          # äº‹ä»¶æºç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ MetricsCollector.java             # æŒ‡æ ‡æ”¶é›†
â”‚   â”‚   â”‚   â””â”€â”€ ConfigLoader.java                 # é…ç½®åŠ è½½
â”‚   â”‚   â””â”€â”€ processor/                            # å¤„ç†å™¨æ¡†æ¶
â”‚   â”‚       â”œâ”€â”€ AbstractBusinessProcessor.java   # å¤„ç†å™¨åŸºç±»
â”‚   â”‚       â””â”€â”€ ProcessorFactory.java             # å¤„ç†å™¨å·¥å‚
â”‚   â””â”€â”€ domain/                                   # åŸŸå¤„ç†å™¨
â”‚       â””â”€â”€ wrongbook/                            # é”™é¢˜æœ¬åŸŸ
â”‚           â””â”€â”€ WrongbookJobProcessor.java        # é”™é¢˜æœ¬å¤„ç†å™¨
â”œâ”€â”€ src/main/resources/                           # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ application.yml                           # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ job-domains/                              # ä½œä¸šåŸŸé…ç½®ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ config/                                       # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ catalog-config.yaml                      # Catalogé…ç½®
â”‚   â””â”€â”€ env-template.env                          # ç¯å¢ƒå˜é‡æ¨¡æ¿
â””â”€â”€ docs/                                         # é¡¹ç›®æ–‡æ¡£
    â””â”€â”€ architecture/                             # æ¶æ„æ–‡æ¡£
        â”œâ”€â”€ multi-source-business-driven-architecture-v2.md
        â””â”€â”€ directory-structure-update-v2.md
```

## ğŸ”„ ç›¸å…³æ–‡ä»¶æ›´æ–°

### 1. é…ç½®åŠ è½½å™¨æ›´æ–°
`ConfigLoader.java` å·²æ›´æ–°é…ç½®åŠ è½½è·¯å¾„ï¼š
- ä» `jobdomain/{name}/config/` æ”¹ä¸º `job/{name}/config/`
- é…ç½®æ–‡ä»¶æŸ¥æ‰¾é€»è¾‘ç›¸åº”è°ƒæ•´

### 2. AIè§„åˆ™æ›´æ–°
- `flink-jar-job-generator.mdc` æ›´æ–°ç›®å½•ç»“æ„è¯´æ˜
- `intelligent-sql-job-generator.mdc` æ›´æ–°è¾“å…¥è¾“å‡ºè·¯å¾„

### 3. æ¶æ„æ–‡æ¡£æ›´æ–°
- `multi-source-business-driven-architecture-v2.md` æ›´æ–°ç›®å½•ç»“æ„
- `project-structure-v2.md` åŒæ­¥æœ€æ–°ç»“æ„

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¯åŠ¨ç‰¹å®šä½œä¸š
```bash
# å¯åŠ¨é”™é¢˜æœ¬ä½œä¸š
java -jar app.jar wrongbook

# å¯åŠ¨ç”¨æˆ·ç»Ÿè®¡ä½œä¸š  
java -jar app.jar user-daily-stats
```

### æ–°å¢ä½œä¸š
```bash
# 1. åˆ›å»ºä½œä¸šç›®å½•
mkdir -p job/new-job/{config,sql,docs}

# 2. å¤åˆ¶æ¨¡æ¿æ–‡ä»¶
cp job/flink-sql-request-template.md job/new-job/flink-sql-request.md

# 3. ç¼–è¾‘é…ç½®æ–‡ä»¶
vim job/new-job/flink-sql-request.md

# 4. ä½¿ç”¨AIè§„åˆ™ç”Ÿæˆä»£ç 
# è°ƒç”¨ intelligent-sql-job-generator æˆ– flink-jar-job-generator

# 5. å¯åŠ¨ä½œä¸š
java -jar app.jar new-job
```

### é…ç½®æ–‡ä»¶ç»“æ„

#### JARä½œä¸šé…ç½® (`request.md`)
ç”¨äºç”Ÿæˆå®Œæ•´çš„JARä½œä¸šï¼ŒåŒ…å«Javaä»£ç å’Œé…ç½®æ–‡ä»¶ã€‚

#### SQLä½œä¸šé…ç½® (`flink-sql-request.md`)
ç”¨äºç”Ÿæˆçº¯Flink SQLä½œä¸šæ–‡ä»¶ã€‚

#### ä½œä¸šé…ç½®æ–‡ä»¶ (`config/{name}-job.yml`)
ç”¨äºJARä½œä¸šçš„è¯¦ç»†é…ç½®ï¼ŒåŒ…å«äº‹ä»¶æºã€ç»´è¡¨ã€è¾“å‡ºç­‰é…ç½®ã€‚

## ğŸ“ˆ æ¶æ„ä¼˜åŠ¿

### âœ… æ›´åŠ æ¸…æ™°
- ç›®å½•åç§°æ›´ç›´è§‚ï¼Œ`job` æ¯” `jobdomain` æ›´ç®€æ´
- æ¨¡æ¿æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¾¿äºæŸ¥æ‰¾
- æ”¯æŒSQLå’ŒJARä¸¤ç§ä½œä¸šç±»å‹çš„é…ç½®

### âœ… æ˜“äºç»´æŠ¤
- å‡å°‘ç›®å½•å±‚çº§ï¼Œé™ä½å¤æ‚åº¦
- ç»Ÿä¸€çš„é…ç½®åŠ è½½é€»è¾‘
- æ ‡å‡†åŒ–çš„ä½œä¸šåˆ›å»ºæµç¨‹

### âœ… æ‰©å±•å‹å¥½
- æ–°å¢ä½œä¸šåªéœ€åˆ›å»ºå¯¹åº”ç›®å½•
- æ¨¡æ¿æ–‡ä»¶å¤ç”¨ï¼Œä¿è¯ä¸€è‡´æ€§
- AIè§„åˆ™è‡ªåŠ¨é€‚é…æ–°ç»“æ„

## ğŸ¯ æ€»ç»“

è¿™æ¬¡ç›®å½•ç»“æ„è°ƒæ•´æ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„ä¼˜åŒ–ï¼š
1. **ä¿æŒäº†æ ¸å¿ƒæ¶æ„ä¸å˜**ï¼šå¤šæºä¸šåŠ¡é©±åŠ¨æ¨¡å¼
2. **ç®€åŒ–äº†ç›®å½•ç»“æ„**ï¼šå‡å°‘ä¸å¿…è¦çš„å¤æ‚æ€§
3. **æå‡äº†ç”¨æˆ·ä½“éªŒ**ï¼šæ›´ç›´è§‚çš„ç›®å½•å‘½å
4. **å¢å¼ºäº†å¯ç»´æŠ¤æ€§**ï¼šæ ‡å‡†åŒ–çš„æ¨¡æ¿å’Œé…ç½®

æ–°çš„ `job/` ç›®å½•ç»“æ„æ›´ç¬¦åˆå¼€å‘è€…çš„ç›´è§‰ï¼ŒåŒæ—¶ä¿æŒäº†åŸæœ‰æ¶æ„çš„æ‰€æœ‰ä¼˜åŠ¿ã€‚
