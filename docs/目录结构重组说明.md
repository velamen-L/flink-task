# ç›®å½•ç»“æ„é‡ç»„è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æ ¹æ®ç”¨æˆ·è¦æ±‚ï¼Œå·²å°†é¡¹ç›®ç›®å½•ç»“æ„æŒ‰ç…§topicåœºæ™¯é‡æ–°ç»„ç»‡ï¼Œå¹¶è°ƒæ•´äº†æ™ºèƒ½ä½œä¸šç”Ÿæˆå™¨è§„åˆ™ï¼Œç¡®ä¿è¾“å‡ºå®Œæ•´çš„ä¸šåŠ¡è§£å†³æ–¹æ¡ˆã€‚

## ğŸ—ï¸ æ–°çš„ç›®å½•ç»“æ„

### 1. Topicåˆ†ç±»ç›®å½•
```
topics/
â”œâ”€â”€ wrongbook/                    # é”™é¢˜æœ¬ä¸šåŠ¡
â”‚   â”œâ”€â”€ sql/                      # SQLä½œä¸šæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ wrongbook_wide_table_hybrid.sql
â”‚   â”œâ”€â”€ docs/                     # æ–‡æ¡£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ DataStream APIéƒ¨ç½²è¯´æ˜.md
â”‚   â”‚   â”œâ”€â”€ é”™é¢˜æœ¬Payloadæ•°æ®ç»“æ„è¯´æ˜.md
â”‚   â”‚   â””â”€â”€ é”™é¢˜æœ¬Flink SQLä½œä¸šé…ç½®è¯´æ˜.md
â”‚   â””â”€â”€ java/                     # Javaæºç ï¼ˆå·²ç§»è‡³srcç›®å½•ï¼‰
â””â”€â”€ user/                         # ç”¨æˆ·è¡Œä¸ºä¸šåŠ¡ï¼ˆé¢„ç•™ï¼‰
    â”œâ”€â”€ sql/
    â”œâ”€â”€ docs/
    â””â”€â”€ java/
```

### 2. JavaåŒ…ç»“æ„é‡ç»„
```
src/main/java/com/flink/realtime/topics/
â”œâ”€â”€ wrongbook/                    # é”™é¢˜æœ¬ä¸šåŠ¡åŒ…
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â””â”€â”€ WrongbookWideTableApp.java          # ä¸»åº”ç”¨ç±»
â”‚   â”œâ”€â”€ bean/
â”‚   â”‚   â””â”€â”€ WrongbookPayload.java               # Payloadæ•°æ®ç»“æ„
â”‚   â””â”€â”€ processor/
â”‚       â”œâ”€â”€ WrongbookAddProcessor.java          # é”™é¢˜æ·»åŠ å¤„ç†å™¨
â”‚       â””â”€â”€ WrongbookFixProcessor.java          # é”™é¢˜è®¢æ­£å¤„ç†å™¨
â””â”€â”€ user/                         # ç”¨æˆ·è¡Œä¸ºä¸šåŠ¡åŒ…ï¼ˆé¢„ç•™ï¼‰
    â”œâ”€â”€ app/
    â”œâ”€â”€ bean/
    â””â”€â”€ processor/
```

## ğŸ“¦ æ–‡ä»¶è¿ç§»æ¸…å•

### å·²è¿ç§»çš„æ–‡ä»¶

#### SQLæ–‡ä»¶
- âœ… `sql/wrongbook_wide_table_hybrid.sql` â†’ `topics/wrongbook/sql/`

#### æ–‡æ¡£æ–‡ä»¶
- âœ… `docs/é”™é¢˜æœ¬Payloadæ•°æ®ç»“æ„è¯´æ˜.md` â†’ `topics/wrongbook/docs/`
- âœ… `docs/é”™é¢˜æœ¬Flink SQLä½œä¸šé…ç½®è¯´æ˜.md` â†’ `topics/wrongbook/docs/`
- âœ… æ–°å¢ `topics/wrongbook/docs/DataStream APIéƒ¨ç½²è¯´æ˜.md`

#### Javaæ–‡ä»¶
- âœ… `src/main/java/com/flink/realtime/bean/WrongbookPayload.java` â†’ `src/main/java/com/flink/realtime/topics/wrongbook/bean/`
- âœ… `src/main/java/com/flink/realtime/processor/impl/WrongbookAddProcessor.java` â†’ `src/main/java/com/flink/realtime/topics/wrongbook/processor/`
- âœ… `src/main/java/com/flink/realtime/processor/impl/WrongbookFixProcessor.java` â†’ `src/main/java/com/flink/realtime/topics/wrongbook/processor/`
- âœ… æ–°å¢ `src/main/java/com/flink/realtime/topics/wrongbook/app/WrongbookWideTableApp.java`

### åŒ…å£°æ˜æ›´æ–°
- âœ… æ›´æ–°æ‰€æœ‰Javaæ–‡ä»¶çš„åŒ…å£°æ˜
- âœ… ä¿®å¤importè¯­å¥å¼•ç”¨
- âœ… éªŒè¯ç¼–è¯‘é€šè¿‡

## ğŸ”§ æ™ºèƒ½ä½œä¸šç”Ÿæˆå™¨è§„åˆ™è°ƒæ•´

### 1. æ–°å¢ç›®å½•ç»“æ„è§„èŒƒ
```markdown
## ç›®å½•ç»“æ„è§„èŒƒ
```
topics/{topic_name}/
â”œâ”€â”€ sql/
â”‚   â””â”€â”€ {topic_name}_wide_table_hybrid.sql     # Flink SQLä½œä¸š
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ DataStream APIéƒ¨ç½²è¯´æ˜.md              # DataStream APIéƒ¨ç½²æ–‡æ¡£
â”‚   â”œâ”€â”€ {topic_name}Payloadæ•°æ®ç»“æ„è¯´æ˜.md     # Payloadæ–‡æ¡£
â”‚   â””â”€â”€ {topic_name}Flink SQLä½œä¸šé…ç½®è¯´æ˜.md   # SQLä½œä¸šæ–‡æ¡£
â””â”€â”€ java/                                      # Javaæºç ï¼ˆå·²ç§»è‡³srcç›®å½•ï¼‰
```

## JavaåŒ…ç»“æ„è§„èŒƒ
```
com.flink.realtime.topics.{topic_name}
â”œâ”€â”€ app
â”‚   â””â”€â”€ {TopicName}WideTableApp.java          # ä¸»åº”ç”¨ç±»
â”œâ”€â”€ bean
â”‚   â””â”€â”€ {TopicName}Payload.java               # Payloadæ•°æ®ç»“æ„
â””â”€â”€ processor
    â”œâ”€â”€ {TopicName}AddProcessor.java          # æ·»åŠ äº‹ä»¶å¤„ç†å™¨
    â””â”€â”€ {TopicName}FixProcessor.java          # è®¢æ­£äº‹ä»¶å¤„ç†å™¨
```
```

### 2. æ–°å¢è¾“å‡ºè¦æ±‚
- âœ… **Payloadæ•°æ®ç»“æ„**ï¼šå¿…é¡»åŒ…å«å®Œæ•´çš„å­—æ®µå®šä¹‰ã€JSONæ³¨è§£ã€getter/setteræ–¹æ³•
- âœ… **DataStream APIä½œä¸š**ï¼šå¿…é¡»æ”¯æŒåŠ¨æ€è·¯ç”±ã€çƒ­éƒ¨ç½²ã€æ•…éšœéš”ç¦»
- âœ… **Flink SQLä½œä¸š**ï¼šå¿…é¡»åŒ…å«å®Œæ•´çš„è¡¨å®šä¹‰ã€ä¸šåŠ¡é€»è¾‘ã€ç›‘æ§è§†å›¾
- âœ… **éƒ¨ç½²æ–‡æ¡£**ï¼šå¿…é¡»åŒ…å«é…ç½®ç®¡ç†ã€éƒ¨ç½²æ­¥éª¤ã€ç›‘æ§å‘Šè­¦ã€è¿ç»´æ“ä½œ

### 3. æ–‡ä»¶å‘½åè§„èŒƒ
- SQLæ–‡ä»¶ï¼š`{topic_name}_wide_table_hybrid.sql`
- Javaç±»ï¼š`{TopicName}WideTableApp.java`ã€`{TopicName}Payload.java`
- æ–‡æ¡£æ–‡ä»¶ï¼š`{topic_name}Payloadæ•°æ®ç»“æ„è¯´æ˜.md`ã€`DataStream APIéƒ¨ç½²è¯´æ˜.md`

## ğŸ¯ è§„åˆ™ç”Ÿæ•ˆéªŒè¯

### 1. é”™é¢˜æœ¬ä¸šåŠ¡å®Œæ•´è§£å†³æ–¹æ¡ˆ

#### âœ… Payloadæ•°æ®ç»“æ„
- **æ–‡ä»¶ä½ç½®**: `src/main/java/com/flink/realtime/topics/wrongbook/bean/WrongbookPayload.java`
- **åŒ…å«å†…å®¹**: 
  - WrongbookAddPayloadï¼ˆé”™é¢˜æ·»åŠ äº‹ä»¶ï¼‰
  - WrongbookFixPayloadï¼ˆé”™é¢˜è®¢æ­£äº‹ä»¶ï¼‰
  - WrongbookDeletePayloadï¼ˆé”™é¢˜åˆ é™¤äº‹ä»¶ï¼‰
  - å®Œæ•´çš„JSONæ³¨è§£å’Œgetter/setteræ–¹æ³•

#### âœ… DataStream APIä½œä¸š
- **æ–‡ä»¶ä½ç½®**: `src/main/java/com/flink/realtime/topics/wrongbook/app/WrongbookWideTableApp.java`
- **æ”¯æŒç‰¹æ€§**:
  - åŠ¨æ€è·¯ç”±é…ç½®
  - çƒ­éƒ¨ç½²æœºåˆ¶
  - æ•…éšœéš”ç¦»ç­–ç•¥
  - ç›‘æ§å‘Šè­¦ä½“ç³»

#### âœ… Flink SQLä½œä¸š
- **æ–‡ä»¶ä½ç½®**: `topics/wrongbook/sql/wrongbook_wide_table_hybrid.sql`
- **åŒ…å«å†…å®¹**:
  - å®Œæ•´çš„è¡¨ç»“æ„å®šä¹‰
  - ä¸šåŠ¡é€»è¾‘å¤„ç†
  - ç›‘æ§è§†å›¾
  - æ€§èƒ½ä¼˜åŒ–é…ç½®

#### âœ… éƒ¨ç½²è¯´æ˜æ–‡æ¡£
- **DataStream APIéƒ¨ç½²è¯´æ˜**: `topics/wrongbook/docs/DataStream APIéƒ¨ç½²è¯´æ˜.md`
- **Payloadæ•°æ®ç»“æ„è¯´æ˜**: `topics/wrongbook/docs/é”™é¢˜æœ¬Payloadæ•°æ®ç»“æ„è¯´æ˜.md`
- **Flink SQLä½œä¸šé…ç½®è¯´æ˜**: `topics/wrongbook/docs/é”™é¢˜æœ¬Flink SQLä½œä¸šé…ç½®è¯´æ˜.md`

### 2. ç¼–è¯‘éªŒè¯
- âœ… æ‰€æœ‰Javaæ–‡ä»¶ç¼–è¯‘é€šè¿‡
- âœ… åŒ…å£°æ˜å’Œimportè¯­å¥æ­£ç¡®
- âœ… æ— ç¼–è¯‘é”™è¯¯

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. æ–°å¢ä¸šåŠ¡Topic
```bash
# åˆ›å»ºæ–°çš„topicç›®å½•ç»“æ„
mkdir -p topics/{new_topic}/{sql,docs,java}

# åˆ›å»ºJavaåŒ…ç»“æ„
mkdir -p src/main/java/com/flink/realtime/topics/{new_topic}/{app,bean,processor}
```

### 2. ä½¿ç”¨æ™ºèƒ½ä½œä¸šç”Ÿæˆå™¨
å½“æä¾›æ–°çš„ä¸šåŠ¡åœºæ™¯æ—¶ï¼Œæ™ºèƒ½ä½œä¸šç”Ÿæˆå™¨å°†è‡ªåŠ¨ï¼š
1. æŒ‰ç…§topicåˆ†ç±»åˆ›å»ºç›®å½•ç»“æ„
2. ç”Ÿæˆå¯¹åº”çš„JavaåŒ…ç»“æ„
3. è¾“å‡ºå®Œæ•´çš„ä¸šåŠ¡è§£å†³æ–¹æ¡ˆ
4. åŒ…å«æ‰€æœ‰å¿…è¦çš„æ–‡æ¡£

### 3. æ–‡ä»¶å‘½åè§„èŒƒ
- Topicåç§°ä½¿ç”¨å°å†™ï¼š`wrongbook`ã€`user`ã€`order`
- Javaç±»åä½¿ç”¨é©¼å³°ï¼š`WrongbookWideTableApp`ã€`UserBehaviorApp`
- æ–‡æ¡£æ–‡ä»¶åä½¿ç”¨ä¸­æ–‡æè¿°

## ğŸ“ æœ€ä½³å®è·µ

### 1. ç›®å½•ç»„ç»‡
- æŒ‰ä¸šåŠ¡topicåˆ†ç±»ï¼Œä¾¿äºç®¡ç†å’Œç»´æŠ¤
- æ¯ä¸ªtopicåŒ…å«å®Œæ•´çš„è§£å†³æ–¹æ¡ˆ
- æ–‡æ¡£å’Œä»£ç åˆ†ç¦»ï¼Œä¾¿äºç‰ˆæœ¬æ§åˆ¶

### 2. åŒ…ç»“æ„è®¾è®¡
- æŒ‰åŠŸèƒ½æ¨¡å—åˆ†åŒ…ï¼šappã€beanã€processor
- åŒ…åä½¿ç”¨å°å†™ï¼Œç±»åä½¿ç”¨é©¼å³°
- ä¿æŒåŒ…ç»“æ„çš„å±‚æ¬¡æ¸…æ™°

### 3. æ–‡æ¡£ç®¡ç†
- æ¯ä¸ªtopicåŒ…å«å®Œæ•´çš„æ–‡æ¡£é›†
- æ–‡æ¡£æŒ‰åŠŸèƒ½åˆ†ç±»ï¼šéƒ¨ç½²ã€é…ç½®ã€æ•°æ®ç»“æ„
- ä¿æŒæ–‡æ¡£çš„åŠæ—¶æ›´æ–°

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®æ¶æ„è¯´æ˜](./æ¶æ„ä»‹ç».md)
- [å¼€å‘è§„èŒƒ](./å¼€å‘è§„èŒƒ.md)
- [æ™ºèƒ½ä½œä¸šç”Ÿæˆå™¨è§„åˆ™](../.cursor/rules/intelligent-job-generator.mdc)
- [é”™é¢˜æœ¬ä¸šåŠ¡æ–‡æ¡£](./topics/wrongbook/docs/)
